[TOC]

### History

> 为了规范Git服务器使用, 方便团队代码交流. 请使用服务器的同事遵循该规范.
>
> update List:
>
> Version:1.0.0:
>
> - 1.添加分组规范
> - 2.添加版本&提交描述规范
>
> Version:1.0.1:
>
> - 1.更新版本管理 和 描述模版格式，date 添加时间 
> - 2.删除GIT服务器使用规范.txt文件
>
> Version:1.0.2
>
> - 1.更新分组描述 
> - 2.删除GIT服务器使用规范.txt文件

#Git服务器上传同步的规范.



## commit规范

#### 1, 普通commit规范

> 参考:Angular 规范

格式如下:

```
<type>(<scope>):<subject>

<body> (可省略)

<footer> (可省略)  
#每一行不能超过72字符, 避免自动换行影响美观
```

**Header**

header一行包括三个字段: `type`(必需)、`scope`(可选)和 subject(必需).

```
type:(用于说明commit的类别, 只允许7个标识符.)
- feat: 新功能(feature)
- fix: 修补bug
- docs: 文档(documentation)
- style: 格式(不影响代码运行的变动)
- refactor: 重构(既不是添加新功能,也不是修改bug)
- test: 增加测试
- chore: 构建过程或辅助工具的变动.

scop
用于说明 commit影响的范围, 比如数据层, 控制层, 视图层等等.

subject
用简短描述, 不超过50个字符.

注意:
- 以动词开头, 使用第一人称时, 比如change ,而不是 changed 或者changes
- 第一个字母小写
- 结尾不加句号
```

**Body**

Body 部分是对本次 commit 的详细描述，可以分成多行。

**Footer**

> 不兼容变动, 关闭 Issue
>
> 如果本次的commit与前一个版本的代码无法兼容，那么Footer部分需要以`BREAKING CHANGE`开头，后面描述本次变动的详细情况以及迁移到新版本代码的方法。
>
> 如果本次commit是针对某个Issue，可以在Footer部分以`Close`开头，后面用`#`号标识对应的Issue号码。





#### 2.发布版本commit规范

模板:

```
version: v1.0.1: 重新整理规范模板

/*****************************************************************************
* Author: ZhangDezhi
* Version:1.0.0 Date:2017/10/19 19:23:12
*
* UpdateContent:
* 1.添加分组规范
* 2.添加版本&提交描述规范
****************************************************************************/
```

#### 3.使用emoji规范

模板:

````
:emoji1: :emoji2: 不超过 50 个字的摘要，首字母大写，使用祈使语气，句末不要加句号

提交信息主体

引用相关 issue 或 PR 编号 <#110>
````

初次提交示例

```
git commit -m ":tada: Initialize Repo"
```

> 默认情况下，在命令行中并不会显示出 emoji, 仅显示 emoji 代码。不过可以使用 [emojify](https://github.com/mrowa44/emojify) 使得在命令行也可显示 emoji, 它是一个 shell 脚本





##  模块描述规范

> 模块必须包含:模块描述和版本更新描述

1. 模块描述模板

```
/*****************************************************************************
* Description
*
* Git服务器上传同步的规范.
*****************************************************************************/
```



2. 模块版本更新模板

```
version: v1.0.1: 重新整理规范模板

/*****************************************************************************
* Author: ZhangDezhi
* Version:1.0.0 Date:2017/10/19 19:23:12
*
* UpdateContent:
* 1.添加分组规范
* 2.添加版本&提交描述规范
****************************************************************************/
```



## Gitblit 分组说明

1. Yanmade
   存放公司项目 源代码 & 资料， 源代码 和 资料单独建立仓库
   例如： 项目X1117-DITO，  源代码仓库名为：X1117-DITO， 资料仓库名为： X1117-DITO_资料

2. Objective-C_Model
   存放各个常用模块&资料，例如控制卡、相机、文件操作、计时器等等
   Note:Demo源代码 与 资料分别建仓库，参考Yanmade分组示例

3. DayDayUp_XXX
   存放各种学习资料&源代码，XXX为子分组，例如DayDayUp_Develop（Git, Object-C，PackageApp，PackageDmg，C++， Java）

   > Note:源代码 与 资料分别建仓库，参考Yanmade分组示例
   >
   > 各种辅助软件或插件等等&使用手册等资料，请务必整理健全的使用手册，以方便大家使用。

4. Tool
   Tool App  
   Tool srouce code

5. Objective-C_Project Of Learning
   非公司项目
   Note:源代码 与 资料分别建仓库，参考Yanmade分组示例

6. Application
   一些安装软件，如Window 存放win下的安装软件，macOS存放mac系统下的安装软件

7. IDE

 各种IDE工具的介绍, 笔记,插件

 ```
 1.XCode
 2.Visual Studio
 3.Eclipse
 ```



##  版本命名说明

版本使用三段式命名,后面跟版本管理信息

方案一
> 适用于项目阶段比较清晰的
```
v1.0.3 (Dev 123-489284)
 | | |  |    |    |_ 提交SHA值
 | | |  |    |_ 提交次数
 | | |  |_分支名:
 | | |_ 小版本号: 从0开始,一直往上加,直到其他两个版本号修改.
 | |_ 分支版本号: 创建新的分支就+1
 |_ 主版本号: 根据行业特点,这个设置成生产阶段,入P1,P2 
```

方案二
> 适用于一个人开发,主线流程比较清晰的情况.
> 要求: 只有有新功能,新bug.必须从Dev创建分支.功能&bug完成后,要合并到Dev分支. 出现稳定版本后,合并到master分支.
>
> 有一个问题: 
>
> 1. 验证版本不能够直接发送现场, 需要获得验证结果后, 并且合并后发送现场.
> 2. 版本号会和验证版本不同, 会给验证人员误解.我验证的是v0.1.5 你发送现场的却是v1.0.0
> 3. 单存看Dev分支.版本号, 不知道与master分支版本号的关系. 这个貌似有问题.细细思考
```
v1.0.3 (Upload 123-22344321)
 | | |          |_提交信息同上
 | | |_ 当前版本节点数,如果是Dev分支和master分支该节点为0
 | |_ Dev分支节点数.如果是master分支,该值为0(每次发布版本后,都删除dev分支,新的开发,创建信息的)
 |_ master分支节点数.
```
